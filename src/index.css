@tailwind base;
@tailwind components;
@tailwind utilities;

/* Chatty Lemon/Chocolate Theme CSS Variables */
/* Based on CHATTY_COLOR_SCHEME 2.md */

:root {
  /* Day Mode - Light cream background, Dark chocolate text */
  --chatty-bg-main: #ffffeb; /* Light cream - Main Area */
  --chatty-bg-sidebar: #ffffeb; /* Sidebar matches main cream in day mode */
  --chatty-bg-message: #ffffd7; /* Message Box */
  --chatty-highlight: #ffffd7; /* Highlight for hover states */
  --chatty-button: #ADA587; /* Primary button color */
  --chatty-line: #ADA587; /* Borders, dividers, structural elements */
  --chatty-text: #3A2E14; /* Primary text color (dark for light background) */
  --chatty-text-inverse: #ffffeb; /* Inverse text (for buttons) */
  --chatty-placeholder: #ADA587; /* Placeholder text color */
  --chatty-status-success: #22c55e; /* Green for success */
  --chatty-status-error: #dc2626; /* Red for errors */
}

[data-theme="night"],
:root.night-mode {
  /* Night Mode - Dark cocoa background, Lemon text */
  --chatty-bg-main: #2F2510; /* Dark cocoa - Main Area */
  --chatty-bg-sidebar: #2F2510; /* Match main for sidebar in night mode */
  --chatty-bg-message: #3A2E14; /* Slightly lighter tone - Message Box */
  --chatty-highlight: #3A2E14; /* Dark cocoa for hover states */
  --chatty-button: #ffffd7; /* Lemon yellow for interactive elements */
  --chatty-line: #ffffd7; /* Matching button tone for dividers and borders */
  --chatty-text: #ffffeb; /* Lemon cloud for readability */
  --chatty-text-inverse: #3A2E14; /* Dark cocoa for text on light buttons */
  --chatty-placeholder: #ADA587; /* Placeholder text color (with reduced opacity 0.7) */
  --chatty-status-success: #22c55e; /* Green for success */
  --chatty-status-error: #dc2626; /* Red for errors */
}

@layer base {
  * {
    @apply border-app-yellow-800;
  }
  
  html, body, #root {
    height: 100%;
  }
  
  body {
    background-color: var(--chatty-bg-main);
    color: var(--chatty-text);
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Override tailwind text utility colors to follow theme vars */
  .text-app-text-900 { color: var(--chatty-text) !important; }
  .text-app-text-800 { color: var(--chatty-text) !important; opacity: 0.85; }
  .text-app-text-700 { color: var(--chatty-text) !important; opacity: 0.75; }
  .text-app-text-600 { color: var(--chatty-text) !important; opacity: 0.65; }

  .chatty-placeholder::placeholder {
    color: var(--chatty-placeholder);
    opacity: 1;
  }

  [data-theme="night"] .chatty-placeholder::placeholder,
  :root.night-mode .chatty-placeholder::placeholder {
    opacity: 0.7;
  }

  /* Global placeholder styling for form inputs */
  input::placeholder,
  textarea::placeholder,
  select::placeholder {
    color: var(--chatty-placeholder);
  }

  [data-theme="night"] input::placeholder,
  [data-theme="night"] textarea::placeholder,
  [data-theme="night"] select::placeholder,
  :root.night-mode input::placeholder,
  :root.night-mode textarea::placeholder,
  :root.night-mode select::placeholder {
    opacity: 0.7;
  }

  /* Slim scrollbars globally */
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--chatty-highlight) transparent;
  }
  *::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }
  *::-webkit-scrollbar-track {
    background: transparent;
  }
  *::-webkit-scrollbar-thumb {
    background-color: var(--chatty-highlight);
    border-radius: 999px;
  }
}

@layer components {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  .message-gradient {
    background: linear-gradient(180deg, rgba(254, 255, 175, 0), rgba(254, 255, 175, 0.8) 58.85%);
  }
  
  .typing-indicator {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: #facc15;
    animation: typing 1.4s infinite ease-in-out;
  }
  
  .typing-indicator:nth-child(1) {
    animation-delay: -0.32s;
  }
  
  .typing-indicator:nth-child(2) {
    animation-delay: -0.16s;
  }
  
  @keyframes typing {
    0%, 80%, 100% {
      transform: scale(0.8);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Animated Chatty Star Logo */
  @keyframes chatty-star-pulse {
    0%, 100% {
      transform: scale(1) rotate(0deg);
      filter: brightness(1) drop-shadow(0 0 8px rgba(255, 235, 59, 0.6));
    }
    50% {
      transform: scale(1.1) rotate(5deg);
      filter: brightness(1.2) drop-shadow(0 0 12px rgba(255, 235, 59, 0.9));
    }
  }

  @keyframes chatty-star-rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .chatty-star-animated {
    animation: chatty-star-pulse 3s ease-in-out infinite, chatty-star-rotate 20s linear infinite;
    transition: all 0.3s ease;
  }

  .chatty-star-animated:hover {
    animation: chatty-star-pulse 1s ease-in-out infinite, chatty-star-rotate 10s linear infinite;
    filter: brightness(1.3) drop-shadow(0 0 16px rgba(255, 235, 59, 1));
  }

  .chatty-logo {
    filter: none;
    transition: transform 0.3s ease;
  }


  .chatty-logo:hover,
  .chatty-star-wrapper:hover .chatty-star {
    animation: chatty-logo-swim 3s ease-in-out infinite;
    transform: scale(1.02);
  }

  @keyframes chatty-logo-swim {
    0% {
      filter:
        drop-shadow(-4px -2px 4px rgba(255, 235, 59, 0.2))
        drop-shadow(2px 4px 10px rgba(255, 211, 78, 0.35));
    }
    25% {
      filter:
        drop-shadow(4px -2px 6px rgba(255, 235, 59, 0.3))
        drop-shadow(-2px 4px 12px rgba(255, 221, 120, 0.4));
    }
    50% {
      filter:
        drop-shadow(2px 4px 6px rgba(255, 235, 59, 0.25))
        drop-shadow(-4px -2px 14px rgba(255, 199, 46, 0.45));
    }
    75% {
      filter:
        drop-shadow(-3px 4px 8px rgba(255, 235, 59, 0.3))
        drop-shadow(4px -3px 12px rgba(255, 211, 78, 0.4));
    }
    100% {
      filter:
        drop-shadow(-4px -2px 4px rgba(255, 235, 59, 0.2))
        drop-shadow(2px 4px 10px rgba(255, 211, 78, 0.35));
    }
  }

  .chatty-star-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    filter: none;
    transition: transform 0.3s ease;
  }

  .chatty-star {
    transition: opacity 0.2s ease;
  }

  .chatty-starburst {
    position: absolute;
    width: 50%;
    height: 50%;
    opacity: 0;
    z-index: 10; /* Increased z-index for proper layering */
    transition: opacity 0.3s ease;
  }

  .chatty-starburst-left {
    animation: chatty-starburst-ccw 7s linear infinite;
    transform: rotate(0deg);
  }

  .chatty-starburst-right {
    animation: chatty-starburst-cw 7s linear infinite;
    transform: rotate(45deg);
  }

  .chatty-starburst-nova-left,
  .chatty-starburst-nova-right {
    width: 90%;
    height: 90%;
    opacity: 0;
    z-index: 5; /* Adjusted z-index for nova elements */
  }

  .chatty-starburst-ray-left,
  .chatty-starburst-ray-right {
    width: 90%;
    height: 90%;
    opacity: 0;
    z-index: 8; /* Adjusted z-index for ray elements */
  }

  .chatty-star-wrapper:hover .chatty-star {
    opacity: 0;
  }

  .chatty-star-wrapper:hover .chatty-starburst {
    opacity: 1;
  }

  .chatty-star-wrapper:hover .chatty-starburst-ray-left,
  .chatty-star-wrapper:hover .chatty-starburst-ray-right {
    opacity: 0.7;
  }

  .chatty-star-wrapper:hover .chatty-starburst-nova-left,
  .chatty-star-wrapper:hover .chatty-starburst-nova-right {
    opacity: 0.9;
  }

  @keyframes chatty-starburst-cw {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes chatty-starburst-ccw {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(-360deg);
    }
  }

}
