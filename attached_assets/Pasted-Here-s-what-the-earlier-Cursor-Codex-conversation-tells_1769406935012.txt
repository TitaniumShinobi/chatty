Here’s what the earlier Cursor + Codex conversation tells us about how date headers were supposed to be handled originally:

The transcript parser in readConversations 3.js is where the “date header” concept lived. parseMessages reads the markdown after the --- header, iterates line-by-line, and uses collectBody to accumulate the text that belongs to a single speaker turn. It already had logic to stop collecting when it hit the next speaker/timestamp line or another ## … header. That is how “December 12, 2025” got excluded from the actual message content in the past.

The discussion around cursor_zen_conversation_display_issue.md (see the excerpt around lines 28,400–28,600) shows that we investigated the November 15/20 anomalies there. Cursor traced it to parseMessages: multi-line content was being cut off because collectBody stopped as soon as it saw the next date header (## November 20, 2025), so the remainder of the Nov 15 entry wasn’t attached to the user bubble.

The fix that was planned (and apparently implemented) was to keep blank lines and date headers outside message bodies. The gist of that plan:

collectBody should treat blank lines as part of content unless it has already read something else, so multi-line entries (with blank lines) don’t prematurely stop.
Date headers (## … lines) should continue to be treated as separators, not content; once the parser sees them it should update currentDate and move on without appending them to segments.
normalizeRole needed to recognize partial matches (like “Devon” vs “Devon Woodson”) so user turns weren’t misclassified, but that was separate from the header issue.
So in the “first place” we implemented it by keeping date headers in the markdown metadata (## Month Day, Year), letting collectBody gather only the speaker content, and relying on currentDate to provide context to the timestamp. When blank lines or bare date lines show up inside a message now, the parser thinks they’re part of the content, which is what you’re seeing inside the bubbles. The conversation above already outlines how we used the collectBody/isDateHeader logic to keep them out of the UI—specifically by stopping collection when a date line is seen and never appending those lines into segments.