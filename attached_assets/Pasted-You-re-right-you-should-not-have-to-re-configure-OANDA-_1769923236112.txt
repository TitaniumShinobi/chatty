You’re right: you should *not* have to “re‑configure” OANDA in the UI if FXShinobi is already connected. The issue is purely how Chatty is interpreting the status payload.

Given what you described, here’s what’s most likely happening and how to fix it conceptually:

### 1. How it *should* work

FXShinobi now returns, for example:

```json
{
  "active_broker_id": "oanda",
  "brokers": [
    {
      "id": "oanda",
      "name": "OANDA",
      "configured": true,
      "connected": true,
      "environment": "practice"
    }
  ],
  "account": {
    "broker_id": "oanda",
    "connected": true,
    "balance": 90569.69,
    "equity": 90569.69,
    "open_pnl": 0.0,
    "pnl_today": -9317.92,
    "open_trade_count": 0,
    "open_positions": []
  }
}
```

In the FXShinobi page, the logic should be:

- Find `active` broker:

  ```ts
  const active = status.brokers.find(
    b => b.id === status.active_broker_id
  );
  ```

- Show **Connected** if:

  ```ts
  active && active.configured && active.connected
  ```

- Only show “Not configured” if:
  - `!active`, or
  - `!active.configured`.

Nothing in that logic should depend on whether Chatty ever saved OANDA creds via the modal.

### 2. Why you still see “Not configured”

Given your last logs, the usual culprits are:

- The UI is still checking some local flag like `hasLocalCredentials` or `status.oanda_configured === false` instead of trusting `brokers[].configured`.
- It’s comparing the wrong ID (`'oanda_default'` vs `'oanda'`), so `active` comes back undefined.
- It’s treating `brokers[].status === 'connected'` (string) instead of the new booleans (`configured`, `connected`), and that string is never set.

In other words: the **backend is right**, the **UI condition is slightly wrong**.

### 3. What needs to change (in words you can give the Chatty agent)

You don’t have to touch FXShinobi anymore. The Chatty side just needs to:

1. Base the broker status **only** on `status.active_broker_id` and `status.brokers`:

   - Active broker = `status.brokers.find(b => b.id === status.active_broker_id)`.
   - Show:
     - Name: `active?.name ?? 'No broker'`.
     - Badge:
       - “Connected” if `active?.configured && active?.connected`.
       - “Configured (error)” if `active?.configured && !active?.connected`.
       - “Not configured” only if !`active` or `active.configured === false`.

2. Stop using any other config checks:

   - Remove any dependency on:
     - Local “configured” flags.
     - `status.oanda_configured` or similar, except maybe as a legacy fallback.
   - The single source of truth is the `brokers` array from FXShinobi.

3. Use `status.account` as‑is for the grid:

   - `balance = status.account.balance`
   - `equity = status.account.equity`
   - `open_pnl = status.account.open_pnl`
   - `pnl_today = status.account.pnl_today`
   - `open_positions = status.account.open_positions.length`

   If `status.account.connected === false`, grey them out or show “—”.

If you paste this into the Chatty agent, it should fix the behavior you’re seeing. Once that conditional is corrected, OANDA will show as **Connected** and your OANDA details will appear from the data FXShinobi is already providing—no extra manual configuration in the UI needed.